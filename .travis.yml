sudo: false
language: node_js
node_js:
- '6'
os:
- osx
- linux
before_install:
- npm i -g npm@latest
- if [ $TRAVIS_OS_NAME == "linux" ]; then export CXX="g++-4.9" CC="gcc-4.9" DISPLAY=:99.0;
  sh -e /etc/init.d/xvfb start; sleep 3; fi
install:
- npm install
- npm run vscode:prepublish
script:
- npm test --silent
before_deploy:
- npm install -g vsce;
- vsce package;
deploy:
- provider: releases
  api_key:
    secure: ahYU+fFgq/E0bztjFNlsJNK8tBoh+h+DiQmn7f4qbW2tke1p0dx5MgOnlU/wf7+XFBigBz4dMWHlEUqzwau5ouns1NZZnSmUJw9thNeRhbNwtbet0aFtOdW1csA4ErncNfoX/bZUrFtswCwpwkdCcqydla0eGmO5cKcZobWJnD4+WvwbpxSDDhyf59AbxE24tpU+C7ZBkd1tzgyRJ3ax9IKL7a6KKuv3dbJdVIxHi4I/msVXOd5F25yRfwtVtzZh/v/LQqFsbhe9oOp3RcJ7Oles4/p9TlenkuEVRJwF3TjmBMv2Fm91fiXkm8cSzD5c77e+jvMigk1hT/dtnP6Wxi9b8lUUUZGUbPJ8iyLLvX4M4sUnnQ/jp65CYM7yyTcGSSW4r1egTYVLx1VC+98TxJf8ny31oYSq9VbzkpcMW/P4qRIB9kmFleSSbqBlEYaY1ywmDy30b1Q6GganTzO6EGW+XMPdaKExkelv49ZwwaCIZ35h2gW6rU+UpmD3Zl6C2MWO1EB+m5xmTa4+BUX9f76IRJtxnqb1EOXM3CsGbX1KFVQF2+5+eUI4BlO1vnl8jf8CPvHuGIPA5farnYQiQq7FyxjUkvc3NoT5yC/DJO5e408H/huS/TTabnUfrtpiq1B8ZSyxCvUfx2QHWhGfzCHQ1THu5O+LfGsoJIVKTDo=
  file_glob: true
  file: '*.vsix'
  skip_cleanup: true
  on:
    repo: kenhowardpdx/vscode-gist
    tags: true
    condition: $TRAVIS_OS_NAME = linux
- provider: script
  script: vsce publish -p $VS_TOKEN
  skip_cleanup: true
  on:
    repo: kenhowardpdx/vscode-gist
    tags: true
    condition: $TRAVIS_OS_NAME = linux
env:
  global:
    secure: ecE8V3uNRC2lcO7wfzWu5iHkuDdvAZj+OEYxOmGYsOi3VlOGzDiCzVV7GlKzUqed4dAcb3XemantzCr1MEEjeqYP6wfXRVQdAvlMrRzktaW7S9Ffnd+EdCjVoMqJqVDNBg5thHgKgTpGwkV1nqyW0a/CGjqEaaM8unyafc+X7LSnHY6M6TTz3MPT+6ZCCklH4XHxj27k5YKbV1TEbkio7qAoisZL3pHh3PdZ4Fu/pps8VeRCCwZIdsve1LCwljj+cdCFA38xWHnVwUpzyARjYs5uHyRNV1KM3g96PPeu7e4GDZOd5y/B18ES2X3a37Xbcyl/0VIzxehBqZ6ycf4AbfpsV9gTMiVxcmxemEcaBSm8TlqTes0vHdLD7U/fGjjhB2dVPefkJHq+EvAMpA9Lo4D5LeFKO6zqqWdWvMKMAngwPOctfV9jxjvKxb22QZTiIMhxO+CTctXf8LScMS2xsfC4RcAXFMWzEudZ2rIE1hWOha/VD9s1bpSv4PEQ92RWuIkz5XwtYJ9iIbuVQHSaATn5zIuZm5nYyLosfaGWwtIFyYll7Sg9Ys87LTnCHXhQrXpcgYqJ0Aeq6mShv1tQVdN1zRmFHEDGRVctjeHjR87iPis0hk9MI9a/HMEUuW1wT+CDX605zn1bXTsHYiR3HTKJtgUyhjvFLhaJNUC0BhU=
